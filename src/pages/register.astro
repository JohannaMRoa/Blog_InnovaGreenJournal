---
import Layout from "../layouts/Layout.astro";

const accessToken = Astro.cookies.get("sb-access-token")?.value;
const refreshToken = Astro.cookies.get("sb-refresh-token")?.value;

if (accessToken && refreshToken) {
  return Astro.redirect("/dashboard");
}
---

<Layout title="Register">
  <section class="min-h-[calc(100vh-80px)] flex items-center justify-center px-6">
    <img src="/colgante_1.png" 
      class="pointer-events-none select-none absolute left-80 top-0 h-full w-auto hidden md:block"
    />
    <img src="/colgante_1.png" 
      class="pointer-events-none select-none absolute right-80 top-0 h-full w-auto hidden md:block"
    />

    <div class="w-full max-w-md bg-white/90 backdrop-blur-sm rounded-xl shadow-sm border border-green-900/10 p-8">

      <!-- Sign up -->
      <h1 class="text-3xl font-semibold text-center text-green-900"> Sign up </h1>

      <p class="text-center text-sm text-green-900/60 mt-2"> Create your account to start writing. </p>

      <form action="/api/auth/register" method="post" class="mt-8 space-y-5">

        <div>
          <label for="email" class="block text-sm text-green-900/70 mb-1"> Username </label>
          <input
            type="text" name="username" required placeholder="your username"
            class="w-full bg-transparent border-b border-green-900/20 py-2 focus:outline-none focus:border-green-700" />
        </div>

        <div>
          <label for="email" class="block text-sm text-green-900/70 mb-1"> Email </label>
          <input id="email" type="email" name="email" required
            placeholder="you@example.com" class="w-full bg-transparent border-b border-green-900/20 py-2 focus:outline-none focus:border-green-700" />
        </div>

        <div>
          <label for="password" class="block text-sm text-green-900/70 mb-1"> Password </label>
          <input id="password" type="password" name="password" required
            placeholder="••••••••" class="w-full bg-transparent border-b border-green-900/20 py-2 focus:outline-none focus:border-green-700" />
        </div>

        <button
          type="submit"
          class="w-full mt-2 bg-green-700 hover:bg-green-800 text-white py-2.5 rounded-md font-medium"> Submit </button>
      </form>

      <p class="text-center text-sm text-green-900/70 mt-6">
        Already have an account? <a href="/signin" class="text-green-800 font-medium hover:underline">
          Login </a>
      </p>
    </div>
  </section>
</Layout>
